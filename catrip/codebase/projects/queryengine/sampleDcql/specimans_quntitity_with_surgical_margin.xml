<?xml version="1.0" encoding="UTF-8"?>
<!--Sample XML file generated by XMLSpy v2006 rel. 3 sp1 (http://www.altova.com)-->
<DCQLQuery xmlns="http://caGrid.caBIG/1.0/gov.nih.nci.cagrid.dcql" xmlns:cql="http://CQL.caBIG/1/gov.nih.nci.cagrid.CQLQuery" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://caGrid.caBIG/1.0/gov.nih.nci.cagrid.dcql
C:\Development\FederatedQueryEngine\schema-cagrid\Distributed_CQL_schema.xsd">
	<!--  Get all   Speciamens whose qunatityInCellCount < 5 from caTissueCore where BreastPositiveSurgicalMargin-neoplasmPresent  in CAE is true-->
	<TargetObject serviceURL="http://localhost:8181/wsrf/services/cagrid/caTissueCore" name="edu.wustl.catissuecore.domainobject.ExternalIdentifier">
		<Group logicRelation="AND">
			<Association name="edu.wustl.catissuecore.domainobject.CellSpecimen" roleName="specimen">
				<Attribute name="qunatityInCellCount" value="5" predicate="LESS_THAN"/>
			</Association>			
			<ForeignAssociation>
				<JoinCondition>
					<LeftJoin>
						<Object>edu.wustl.catissuecore.domainobject.ExternalIdentifier</Object>
						<Property>id</Property>
					</LeftJoin>
					<RightJoin>
						<Object>edu.duke.catrip.cae.domain.general.Speciamen</Object>
						<Property>identifier</Property>
					</RightJoin>
				</JoinCondition>
				<ForeignObject name="edu.duke.catrip.cae.domain.general.Speciamen" serviceURL="http://localhost:8181/wsrf/services/cagrid/CAE">
					<Association name="edu.pitt.cabig.cae.domain.general.AnnotationEventParameters" roleName="annotationEventParametersCollection">
						<Association name="edu.pitt.cabig.cae.domain.general.BreastPositiveSurgicalMargin" roleName="annotationSetCollection">
							<Attribute name="neoplasmPresent" value="true" predicate="EQUAL_TO"/>
						</Association>
					</Association>
				</ForeignObject>
			</ForeignAssociation>
		</Group>
	</TargetObject>
</DCQLQuery>
